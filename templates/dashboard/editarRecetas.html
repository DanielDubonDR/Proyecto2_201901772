<!doctype html>
<html class="no-js" lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="https://img.icons8.com/officel/16/000000/cook-male.png">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/font-awesome.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/themify-icons.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/metisMenu.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/owl.carousel.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/slicknav.min.css')}}">
    <!-- amchart css -->
    <link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
    <!-- others css -->
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/typography.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/default-css.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/styles.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'assets/css/responsive.css')}}">
    <!-- modernizr css -->
    <script src="{{url_for('static', filename = 'assets/js/vendor/modernizr-2.8.3.min.js')}}"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">
</head>

<body>
    <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <!-- preloader area start -->
    <div id="preloader">
        <div class="loader"></div>
    </div>
    <!-- preloader area end -->
    <!-- page container area start -->
    <div class="page-container">
        <!-- sidebar menu area start -->
        <div class="sidebar-menu">
            <div class="sidebar-header">
                <div class="logo">
                    <a href="index.html"><img src="https://img.icons8.com/officel/100/000000/cook-male.png" alt="logo"></a>
                </div>
            </div>
            <div class="main-menu">
                <div class="menu-inner">
                    <nav>
                        <ul class="metismenu" id="menu">
                            <li><a href="/dashboard"><i class="ti-dashboard "></i> <span>Dashboard</span></a></li>
                            <li class="active">
                                <a href="javascript:void(0)" aria-expanded="true"><i class="ti-layout-cta-center "></i><span>Recetas</span></a>
                                <ul class="collapse">
                                    <li class="active"><a href="/dashboard/recetasPublicadas">Recetas Publicadas</a></li>
                                    <li><a href="index2.html">Cargar recetas</a></li>
                                    <li><a href="index3.html">Generar reporte de recetas</a></li>
                                </ul>
                            </li>
                            <li><a href="/dashboard/comentarios"><i class=" ti-comment-alt "></i> <span>Comentarios</span></a></li>
                            <li>
                                <a href="javascript:void(0)" aria-expanded="true"><i class="ti-thumb-up "></i><span>Reacciones</span></a>
                                <ul class="collapse">
                                    <li><a href="reacciones.html">Ver reacciones</a></li>
                                    <li><a href="linechart.html">Agregar reacciones</a></li>
                                </ul>
                            </li>
                            
                            <li>
                                <a href="javascript:void(0)" aria-expanded="true"><i class=" ti-user "></i><span>Usuarios</span></a>
                                <ul class="collapse">
                                    <li><a href="/dashboard/usuarios">Usuarios Registrados</a></li>
                                    <li><a href="/dashboard/usuarios/registrar">Registrar Usuario</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <!-- sidebar menu area end -->
        <!-- main content area start -->
        <div class="main-content">
            <!-- header area start -->
            <div class="header-area">
                <div class="row align-items-center">
                    <!-- nav and search button -->
                    <div class="col-md-6 col-sm-8 clearfix">
                        <div class="nav-btn pull-left">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <h6 class="page-title pull-right" style="font-family: Lobster, serif;" >CUK</h6>
                    </div>
                    <!-- profile info & task notification -->
                    <div class="col-md-6 col-sm-4 clearfix">
                        <ul class="notification-area pull-right">
                            <li id="full-view"><i class="ti-fullscreen"></i></li>
                            <li id="full-view-exit"><i class="ti-zoom-out"></i></li>
                            <li class="dropdown">
                                <i class="ti-bell dropdown-toggle" data-toggle="dropdown">
                                    <span>1</span>
                                </i>
                                <div class="dropdown-menu bell-notify-box notify-box">
                                    <span class="notify-title">You have 1 new notifications <a href="#">view all</a></span>
                                    <div class="nofity-list">
                                        <a href="#" class="notify-item">
                                            <div class="notify-thumb"><i class="ti-key btn-danger"></i></div>
                                            <div class="notify-text">
                                                <p>You have Changed Your Password</p>
                                                <span>Just Now</span>
                                            </div>
                                        </a>
                                        <a href="#" class="notify-item">
                                            <div class="notify-thumb"><i class="ti-comments-smiley btn-info"></i></div>
                                            <div class="notify-text">
                                                <p>New Commetns On Post</p>
                                                <span>30 Seconds ago</span>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- header area end -->
            <!-- page title area start -->
            <div class="page-title-area">
                <div class="row align-items-center">
                    <div class="col-sm-6">
                        <div class="breadcrumbs-area clearfix">
                            <h4 class="page-title pull-left">Recetas</h4>
                            <ul class="breadcrumbs pull-left">
                                <li><a href="recetasPublicadas.html">Home</a></li>
                                <li><span>Editar Recetas</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-6 clearfix">
                        <div class="user-profile pull-right">
                            <h4 class="user-name dropdown-toggle" data-toggle="dropdown">{{nombre}}<i class="fa fa-angle-down"></i></h4>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="/">Vista de Usuario</a>
                                <a class="dropdown-item" href="/perfil">Modificar Perfil</a>
                                <a class="dropdown-item" href="/logout">Cerrar Sesión</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- page title area end -->
            <div class="main-content-inner">
                <!-- Input Sizes Rounded start -->
                <div class="col-12 mt-5">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="header-title">Editar recetas</h4>
                            <h6 class="text-primary">Titulo de la receta</h6>
                            <input id="titulo" class="form-control form-control-lg input-rounded mb-4" type="text" placeholder="Titulo de la receta" value="{{recipe.titulo}}">
                            <h6 class="text-primary">Categoria</h6>
                            <input id="categoria" class="form-control form-control-lg input-rounded mb-4" type="text" placeholder="Categoria, ej: Postre, Bebida..." value="{{recipe.categoria}}">
                            <h6 class="text-primary">Resumen</h6>
                            <textarea id="resumen" class="form-control " aria-label="With textarea" placeholder="Resumen de la receta">{{recipe.resumen}}</textarea>
                            <br>
                            <h6 class="text-primary">Ingredientes</h6>
                            <textarea id="ingredientes" class="form-control" aria-label="With textarea" placeholder="Ingredientes. Para determinar cada ingrediente usar # despues del primer ingrediente ej: 1/2 cucharada de azúcar #4 pizcas de pimienta #4 tazas de agua">{{recipe.ingredientes}}</textarea>
                            <br>
                            <h6 class="text-primary">Preparación</h6>
                            <textarea id="preparacion" class="form-control" aria-label="With textarea" placeholder="Preparación. Para determinar cada paso de preparación usar después de la primera instrucción # ej: Cortar en juliana la cebolla #Cocinar a fuego lento">{{recipe.preparacion}}</textarea>
                            <br>
                            <h6 class="text-primary">Tiempo estimado</h6>
                            <input id="tiempo" class="form-control form-control-lg input-rounded mb-4" type="text" placeholder="Tiempo estimado de preparación" value="{{recipe.tiempo}}">
                            <h6 class="text-primary">URL de la imagen</h6>
                            <input id="imagen" class="form-control form-control-lg input-rounded mb-4" type="text" placeholder="URL de la imagen" value="{{recipe.imagen}}">
                            <div class="pull-right">
                                <button type="button" onclick="editarReceta()" class="btn btn-rounded btn-success mb-3 ">Guardar Cambios</button>
                                <button type="button" onclick="location.href='/dashboard/recetasPublicadas'" class="btn btn-rounded btn-danger mb-3">Cancelar</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Input Sizes Rounded end -->
        	</div>
        	<!-- main content area end -->
    <script>
        function editarReceta()
        {
            var titulo = document.querySelector('#titulo').value
            var categoria = document.querySelector('#categoria').value
            var resumen = document.querySelector('#resumen').value
            var ingredientes = document.querySelector('#ingredientes').value
            var preparacion = document.querySelector('#preparacion').value
            var tiempo = document.querySelector('#tiempo').value
            var imagen = document.querySelector('#imagen').value
            if(titulo!="" && categoria!=="" && resumen!=="" && ingredientes!=="" && preparacion!=="" && tiempo!=="" && imagen!=="")
            {

                var objeto = {
                    'titulo':titulo,
                    'categoria':categoria,
                    'resumen':resumen,
                    'ingredientes':ingredientes,
                    'preparacion':preparacion,
                    'tiempo':tiempo,
                    'imagen':imagen
                }
                console.log(objeto)
                fetch(`/dashboard/recetas/editar/{{recipe.id}}`, {
                method: 'PUT',
                body: JSON.stringify(objeto), 
                headers:{
                    'Content-Type': 'application/json'
                } 
                }).then(res => res.json())
                .catch(error => {
                    console.error('Error:', error)
                    alert("Ocurrio un error")
                })
                .then(response =>{
                    console.log('Success:', response);
                    alert(response.message)
                    location.reload
                    location.href="/dashboard/recetasPublicadas"
                }) 
            }
            else{
                alert('Llene todos los campos')
            }
        }
    </script> 
    <!-- jquery latest version -->
    <script src="{{url_for('static', filename = 'assets/js/vendor/jquery-2.2.4.min.js')}}"></script>
    <!-- bootstrap 4 js -->
    <script src="{{url_for('static', filename = 'assets/js/popper.min.js')}}"></script>
    <script src="{{url_for('static', filename = 'assets/js/bootstrap.min.js')}}"></script>
    <script src="{{url_for('static', filename = 'assets/js/owl.carousel.min.js')}}"></script>
    <script src="{{url_for('static', filename = 'assets/js/metisMenu.min.js')}}"></script>
    <script src="{{url_for('static', filename = 'assets/js/jquery.slimscroll.min.js')}}"></script>
    <script src="{{url_for('static', filename = 'assets/js/jquery.slicknav.min.js')}}"></script>
    <!-- others plugins -->
    <script src="{{url_for('static', filename = 'assets/js/plugins.js')}}"></script>
    <script src="{{url_for('static', filename = 'assets/js/scripts.js')}}"></script>
</body>

</html>